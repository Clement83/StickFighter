const byte finalScreen[] PROGMEM = {64,40,0x0,0x0,0x0,0x0,0xC0,0x0,0x40,0x80,0x0,0x0,0x0,0x0,0xA0,0x0,0xE0,0x80,0x0,0x0,0x0,0x0,0xCC,0xE6,0x46,0xC0,0x0,0x0,0x0,0x0,0xA8,0xEA,0x48,0xA0,0x18,0x0,0x0,0x0,0xAE,0xAE,0x46,0xA0,0x3C,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x7A,0x0,0x0,0x0,0xE0,0x0,0x0,0x0,0xFC,0x0,0x0,0x0,0xE0,0x0,0x0,0x0,0xF8,0x0,0x0,0x0,0xAC,0xCA,0x0,0x0,0xB4,0x0,0x0,0x0,0xA8,0xAA,0x0,0x0,0x4E,0xF0,0x0,0x0,0xAE,0xAE,0x0,0x0,0x1C,0xF2,0x0,0x0,0x0,0x0,0x0,0x0,0xA,0xF4,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x28,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xB0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x3,0xF0,0x0,0x0,0x0,0x20,0x0,0x0,0x3,0xD0,0x0,0x0,0x0,0x20,0x0,0x0,0x3,0xD0,0x0,0x0,0x0,0x50,0x0,0x0,0x1,0x20,0x0,0x0,0x0,0x90,0x0,0x0,0x3,0xC0,0x0,0x0,0x1,0xB0,0x0,0x0,0x5,0x0,0x0,0x0,0xF,0xFF,0xFC,0x0,0x5,0x0,0x0,0x0,0x8,0x0,0x4,0x0,0x5,0x0,0x0,0x0,0x9,0x1,0x6,0x0,0x5,0x0,0x0,0x0,0xB,0x1,0x6,0x0,0x2,0x80,0x0,0x0,0x9,0x1B,0x86,0x0,0x2,0x80,0x0,0x0,0x9,0x11,0x6,0x0,0x2,0xC0,0x0,0x0,0xB,0xB1,0x6,0xF,0xFF,0xFC,0x0,0x0,0x8,0x0,0x6,0x8,0x0,0x4,0x0,0x0,0xB,0xB0,0x6,0x1B,0x80,0x84,0x0,0x0,0xB,0x90,0x6,0x18,0x80,0x84,0x0,0x0,0xA,0x18,0x6,0x1B,0xB1,0x84,0x0,0x0,0x8,0x0,0x6,0x1A,0x2A,0x84,0x0,0x0,0x8,0x0,0x6,0x1B,0xA9,0x84,0x0,0x0,0x8,0x0,0x6,0x18,0x0,0x4,0x0,0x0,0x8,0x0,0x6,0x1B,0xA0,0x4,0x0,0x0,0x8,0x0,0x6,0x1B,0xA0,0x4,0x0,0x0,0x8,0x0,0x6,0x1A,0x20,0x4,0x0,0x0,0x8,0x0,0x6,0x18,0x0,0x4,0x0,0x0,};
const byte finalScreenLoose[] PROGMEM = {24,5,0x64,0xCC,0xA0,0x8A,0xAA,0xA0,0x4A,0xCC,0x40,0x2A,0xAA,0x40,0xC4,0xAA,0x40,};
const byte finalScreenWin[] PROGMEM = {64,5,0x64,0xA6,0xC4,0xEA,0x84,0xEE,0x4A,0x60,0x8A,0xA8,0xAA,0x4A,0x8A,0x44,0xAA,0x80,0x8A,0xE8,0xCE,0x4A,0x8E,0x44,0xAE,0x40,0x8A,0xEA,0xAA,0x4A,0x8A,0x44,0xAE,0x20,0x64,0xA6,0xAA,0x4E,0xEA,0x4E,0x4A,0xC0,};
const byte finalScreenP1[] PROGMEM = {64,40,0x0,0x0,0x0,0x0,0xC0,0x0,0x40,0x80,0x0,0x0,0x0,0x0,0xA0,0x0,0xE0,0x80,0x0,0x0,0x0,0x0,0xCC,0xE6,0x46,0xC0,0x0,0x0,0x0,0x0,0xA8,0xEA,0x48,0xA0,0x18,0x0,0x0,0x0,0xAE,0xAE,0x46,0xA0,0x3C,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x7A,0x0,0x0,0x0,0xE0,0x0,0x0,0x0,0xFC,0x0,0x0,0x0,0xE0,0x0,0x0,0x0,0xF8,0x0,0x0,0x0,0xAC,0xCA,0x0,0x0,0xB4,0x0,0x0,0x0,0xA8,0xAA,0x0,0x0,0x4E,0xF0,0x0,0x0,0xAE,0xAE,0x0,0x0,0x1C,0xF2,0x0,0x0,0x0,0x0,0x0,0x0,0xA,0xF4,0x0,0x0,0x0,0x0,0x0,0x0,0x1,0x28,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0xB0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x60,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x20,0x0,0x0,0x3,0xF0,0x0,0x0,0x0,0x20,0x0,0x0,0x3,0xD0,0x0,0x0,0x0,0x20,0x0,0x0,0x3,0xD0,0x0,0x0,0x0,0x50,0x0,0x0,0x1,0x20,0x0,0x0,0x0,0x90,0x0,0x0,0x3,0xC0,0x0,0x0,0x1,0xB0,0x0,0x0,0x5,0x0,0x0,0x0,0xF,0xFF,0xFC,0x0,0x5,0x0,0x0,0x0,0x8,0x0,0x4,0x0,0x5,0x0,0x0,0x0,0x9,0x1,0x6,0x0,0x5,0x0,0x0,0x0,0xB,0x1,0x6,0x0,0x2,0x80,0x0,0x0,0x9,0x1B,0x86,0x0,0x2,0x80,0x0,0x0,0x9,0x11,0x6,0x0,0x2,0xC0,0x0,0x0,0xB,0xB1,0x6,0xF,0xFF,0xFC,0x0,0x0,0x8,0x0,0x6,0x8,0x0,0x4,0x0,0x0,0xB,0xA0,0x6,0x1B,0x80,0x84,0x0,0x0,0xB,0xA0,0x6,0x18,0x80,0x84,0x0,0x0,0xA,0x20,0x6,0x1B,0xB1,0x84,0x0,0x0,0x8,0x0,0x6,0x1A,0x2A,0x84,0x0,0x0,0x8,0x0,0x6,0x1B,0xA9,0x84,0x0,0x0,0x8,0x0,0x6,0x18,0x0,0x4,0x0,0x0,0x8,0x0,0x6,0x1B,0xB0,0x4,0x0,0x0,0x8,0x0,0x6,0x1B,0x90,0x4,0x0,0x0,0x8,0x0,0x6,0x1A,0x18,0x4,0x0,0x0,0x8,0x0,0x6,0x18,0x0,0x4,0x0,0x0,};

boolean choiceMenu;

void initFinalScreen()
{
  choiceMenu = true;
}

void updateFinalScreen()
{
  if(gb.buttons.pressed(BTN_UP) || gb.buttons.pressed(BTN_DOWN))
  {
    choiceMenu = !choiceMenu;
  }
  if(gb.buttons.pressed(BTN_A))
  {
    initPlayer(true);
    initArena();
    if(choiceMenu)
    {
      if(isOnePlayer) stateGame = 0;
      else stateGame = 1;
    }
    else 
    {
      stateGame = 3;
    }
  }
}

void drawFinalScreen()
{
  if(Player1.cptVictory == 3)
  {
      gb.display.drawBitmap(12,8,finalScreenP1);
  }
  else 
  {
      gb.display.drawBitmap(12,8,finalScreen);
  }

  if(((isMaster|| isOnePlayer ) && Player1.cptVictory == 3) || ( (!isMaster && !isOnePlayer && Player2.cptVictory == 3)))
  {
    gb.display.drawBitmap(10,1,finalScreenWin);
  }
  else 
  {
    gb.display.drawBitmap(10,1,finalScreenLoose);
  }
  gb.display.cursorX = 40;
  if(choiceMenu)
  {
    gb.display.cursorY = 8;
  }
  else 
  {
    gb.display.cursorY = 14;
  }
  gb.display.print(F("\20"));
}
